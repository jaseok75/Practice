# 운영체제 구조 - 사용자 모드와 커널 모드
## CPU Protection Rings
* CPU도 권한 모드라는 것을 가지고 있다. --> 이것을 Ring이라고 함.
  + 사용자 모드 (user mode by application) : 사용자 모드에서 특권 명령어와 같은 것들을 실행하려고 하면 못하게 막혀 있다. -> Ring 3
  + 커널 모드 (kernel mode): 특권 명령어 실행과 원하는 작업 수행을 위한 자원 접근을 가능하게 하는 모드 -> Ring 0
* 보통 Ring 0과 Ring 3만을 사용한다.
---
> kernel이란? - OS의 핵심적인 기능 
>
> shell이란? kernel의 껍데기
---
## CPU Protection Rings
### 두 가지 모드
* 사용자 모드 (user mode): 응용 프로그램이 사용
* 커널 모드 (kernel mode): OS가 사용
---
## 시스템 콜은 커널 모드로 실행
* 커널 모드에서만 실행 가능한 기능들이 있다.
* 커널 모드로 실행하려면 반드시 시스템 콜을 사용해야 한다.
* 시스템 콜은 운영체제가 제공한다.
---
## 사용자 모드와 커널 모드
* 함부로 응용 프로그램이 전체 컴퓨터 시스템을 해치지 못한다.
* 주민등록등본은 꼭 동사무소/민원24시에서 특별한 신청서(시스템 콜)를 써야만 발급하는 것과 유사한 원리
  + 동사무소 직원들은 특별한 권한을 가지고 주민등록등본 출력 명령을 실행 --> 이 부분 커널 모드
---
* 응용 프로그래머와 시스템 프로그래머
  + 응용 프로그래머: API를 가지고 응용 프로그램을 만듦
  + 시스템 프로그래머: Shell/API/System call이나 하드웨어를 다룸
---
## 정리
* 운영체제는 **시스템 콜** 제공
* 프로그래밍 언어별로 운영체제 기능을 활용하기 위해 시스템 콜을 기반으로 **API** 제공
* 응용 프로그램은 운영체제 기능 필요시, 해당 **API**를 사용해서 프로그램으르 작성
* 응용 프로그램이 실행돼서 운영체제 기능이 필요한 **API**를 호출하면 시스템 콜이 호출돼서 **커널 모드로 변경되어** OS 내부에서 해당 명령이 실행되고 다시 응용 프로그램으로 돌아간다.
